---
- name: Bootstrap gateway Node
  hosts: ipfs0_gateway
  tasks:
    - include_role:
        name: bootstrap_add_peers
      vars:
        container: ipfs0_gateway
        node_host_ip: "{{data.node_host_ip}} | default({})"
        node_peer_id: "{{data.node_peer_id}} | default({}) "
      when: "{{data.node_host_ip}}" is defined
      loop:
        - {
            node_host_ip: "{{hostvars['ipfs1']['ipfs_host']}}",
            node_peer_id: "{{hostvars['ipfs1']['peer_id']}}",
          }
        - {
            node_host_ip: "{{hostvars['ipfs6']['ipfs_host']}}",
            node_peer_id: "{{hostvars['ipfs6]['peer_id']}}",
          }
        - {
            node_host_ip: "{{hostvars['ipfs11']['ipfs_host']}}",
            node_peer_id: "{{hostvars['ipfs11']['peer_id']}}",
          }
      loop_control:
        loop_var: data
      ignore_errors: true
